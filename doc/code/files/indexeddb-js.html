<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>RemoteStorage.IndexedDB - remoteStorage.js</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.51 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="RemoteStorage.IndexedDB"></a>RemoteStorage.<wbr>IndexedDB</h1><div class=CBody><p>IndexedDB Interface</p><p>This file exposes a get/put/delete interface, accessing data in an indexedDB.</p><h4 class=CHeading>There are multiple parts to this interface</h4><h4 class=CHeading>The RemoteStorage integration</h4><ul><li>RemoteStorage.IndexedDB._rs_supported() determines if indexedDB support is available.&nbsp; If it isn&rsquo;t, RemoteStorage won&rsquo;t initialize the feature.</li><li>RemoteStorage.IndexedDB._rs_init() initializes the feature.&nbsp; It returns a promise that is fulfilled as soon as the database has been opened and migrated.</li></ul><h4 class=CHeading>The storage interface (RemoteStorage.IndexedDB object)</h4><ul><li>Usually this is accessible via &ldquo;remoteStorage.local&rdquo;</li><li>#get() takes a path and returns a promise.</li><li>#put() takes a path, body and contentType and also returns a promise.&nbsp; In addition it also takes a &lsquo;incoming&rsquo; flag, which indicates that the change is not fresh, but synchronized from remote.</li><li>#delete() takes a path and also returns a promise.&nbsp; It also supports the &lsquo;incoming&rsquo; flag described for #put().</li><li>#on(&lsquo;change&rsquo;, ...) events, being fired whenever something changes in the storage.&nbsp; Change events roughly follow the StorageEvent pattern.&nbsp; They have &ldquo;oldValue&rdquo; and &ldquo;newValue&rdquo; properties, which can be used to distinguish create/update/delete operations and analyze changes in change handlers.&nbsp; In addition they carry a &ldquo;origin&rdquo; property, which is either &ldquo;window&rdquo; or &ldquo;remote&rdquo;.&nbsp; &ldquo;remote&rdquo; events are fired whenever the &ldquo;incoming&rdquo; flag is passed to #put() or #delete().&nbsp; This is usually done by RemoteStorage.Sync.</li></ul><h4 class=CHeading>The revision interface (also on RemoteStorage.IndexedDB object)</h4><ul><li>#setRevision(path, revision) sets the current revision for the given path.&nbsp; Revisions are only generated by the remotestorage server, so this is usually done from RemoteStorage.Sync once a pending change has been pushed out.</li><li>#setRevisions(revisions) takes path/revision pairs in the form: [[path1, rev1], [path2, rev2], ...] and updates all revisions in a single transaction.</li><li>#getRevision(path) returns the currently stored revision for the given path.</li></ul><h4 class=CHeading>The changes interface (also on RemoteStorage.IndexedDB object)</h4><ul><li>Used to record local changes between sync cycles.</li><li>Changes are stored in a separate ObjectStore called &ldquo;changes&rdquo;.</li><li>#_recordChange() records a change and is called by #put() and #delete(), given the &ldquo;incoming&rdquo; flag evaluates to false.&nbsp; It is private andshould never be used from the outside.</li><li>#changesBelow() takes a path and returns a promise that will be fulfilled with an Array of changes that are pending for the given path or below.&nbsp; This is usually done in a sync cycle to push out pending changes.</li><li>#clearChange removes the change for a given path.&nbsp; This is usually done RemoteStorage.Sync once a change has successfully been pushed out.</li><li>#setConflict sets conflict attributes on a change.&nbsp; It also fires the &ldquo;conflict&rdquo; event.</li><li>#on(&lsquo;conflict&rsquo;, ...) event.&nbsp; Conflict events usually have the following attributes: path, localAction and remoteAction.&nbsp; Both actions are either &ldquo;PUT&rdquo; or &ldquo;DELETE&rdquo;.&nbsp; They also bring a &ldquo;resolve&rdquo; method, which can be called with either of the strings &ldquo;remote&rdquo; and &ldquo;local&rdquo; to mark the conflict as resolved.&nbsp; The actual resolution will usually take place in the next sync cycle.</li></ul></div></div></div>

</div><!--Content-->


<div id=Footer>remoteStorage.js is developed by some people. It's open source (MIT license) and meant for YOU! Don't mess with people's data, dude.&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>remoteStorage.js</div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">API</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Public API</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="eventhandling-js.html">eventhandling</a></div></div><div class=MEntry><div class=MFile><a href="remotestorage-js.html">RemoteStorage</a></div></div><div class=MEntry><div class=MFile><a href="access-js.html">RemoteStorage.<wbr>Access</a></div></div><div class=MEntry><div class=MFile><a href="baseclient-js.html">RemoteStorage.<wbr>BaseClient</a></div></div><div class=MEntry><div class=MFile><a href="caching-js.html">RemoteStorage.<wbr>Caching</a></div></div><div class=MEntry><div class=MFile id=MSelected>RemoteStorage.<wbr>IndexedDB</div></div><div class=MEntry><div class=MFile><a href="wireclient-js.html">wireclient.js</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Docs Index</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div></div></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>