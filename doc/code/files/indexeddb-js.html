<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>RemoteStorage.IndexedDB</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="RemoteStorage.IndexedDB"></a>RemoteStorage.<wbr>IndexedDB</h1><div class=CBody><p>IndexedDB Interface</p><p>TODO rewrite, doesn&rsquo;t expose GPD anymore, it&rsquo;s in cachinglayer now</p><p>This file exposes a get/put/delete interface, accessing data in an IndexedDB.</p><h4 class=CHeading>There are multiple parts to this interface</h4><h4 class=CHeading>The RemoteStorage integration</h4><ul><li>RemoteStorage.IndexedDB._rs_supported() determines if IndexedDB support is available.&nbsp; If it isn&rsquo;t, RemoteStorage won&rsquo;t initialize the feature.</li><li>RemoteStorage.IndexedDB._rs_init() initializes the feature.&nbsp; It returns a promise that is fulfilled as soon as the database has been opened and migrated.</li></ul><h4 class=CHeading>The storage interface (RemoteStorage.IndexedDB object)</h4><ul><li>Usually this is accessible via &ldquo;remoteStorage.local&rdquo;</li><li>#get() takes a path and returns a promise.</li><li>#put() takes a path, body and contentType and also returns a promise.</li><li>#delete() takes a path and also returns a promise.</li><li>#on(&lsquo;change&rsquo;, ...) events, being fired whenever something changes in the storage.&nbsp; Change events roughly follow the StorageEvent pattern.&nbsp; They have &ldquo;oldValue&rdquo; and &ldquo;newValue&rdquo; properties, which can be used to distinguish create/update/delete operations and analyze changes in change handlers.&nbsp; In addition they carry a &ldquo;origin&rdquo; property, which is either &ldquo;window&rdquo;, &ldquo;local&rdquo;, or &ldquo;remote&rdquo;.&nbsp; &ldquo;remote&rdquo; events are fired whenever a change comes in from RemoteStorage.Sync.</li></ul><h4 class=CHeading>The sync interface (also on RemoteStorage.IndexedDB object)</h4><ul><li>#getNodes([paths]) returns the requested nodes in a promise.</li><li>#setNodes(map) stores all the nodes given in the (path -&gt; node) map.</li></ul><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#RemoteStorage.IndexedDB" >RemoteStorage.<wbr>IndexedDB</a></td><td class=SDescription>IndexedDB Interface</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#RemoteStorage.IndexedDB.Properties" >Properties</a></td><td class=SDescription></td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#RemoteStorage.IndexedDB.changesQueued" >changesQueued</a></td><td class=SDescription>Given a node for which uncommitted changes exist, this cache stores either the entire uncommitted node, or false for a deletion. </td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#RemoteStorage.IndexedDB.changesRunning" >changesRunning</a></td><td class=SDescription>Given a node for which uncommitted changes exist, this cache stores either the entire uncommitted node, or false for a deletion. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="RemoteStorage.IndexedDB.Properties"></a>Properties</h3></div></div>

<div class="CProperty"><div class=CTopic><h3 class=CTitle><a name="RemoteStorage.IndexedDB.changesQueued"></a>changesQueued</h3><div class=CBody><p>Given a node for which uncommitted changes exist, this cache stores either the entire uncommitted node, or false for a deletion.&nbsp; The node&rsquo;s path is used as the key.</p><p>changesQueued stores changes for which no IndexedDB transaction has been started yet.</p></div></div></div>

<div class="CProperty"><div class=CTopic><h3 class=CTitle><a name="RemoteStorage.IndexedDB.changesRunning"></a>changesRunning</h3><div class=CBody><p>Given a node for which uncommitted changes exist, this cache stores either the entire uncommitted node, or false for a deletion.&nbsp; The node&rsquo;s path is used as the key.</p><p>At any time there is at most one IndexedDB transaction running. changesRunning stores the changes that are included in that currently running IndexedDB transaction, or if none is running, of the last one that ran.</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Public API</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="remotestorage-js.html">RemoteStorage</a></div></div><div class=MEntry><div class=MFile><a href="access-js.html">RemoteStorage.<wbr>Access</a></div></div><div class=MEntry><div class=MFile><a href="baseclient-js.html">RemoteStorage.<wbr>BaseClient</a></div></div><div class=MEntry><div class=MFile><a href="caching-js.html">RemoteStorage.<wbr>Caching</a></div></div><div class=MEntry><div class=MFile><a href="modules-js.html">RemoteStorage.<wbr>defineModule</a></div></div><div class=MEntry><div class=MFile><a href="i18n-js.html">RemoteStorage.I18n</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Internals</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Classes</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="baseclient/types-js.html">BaseClient.<wbr>Types</a></div></div><div class=MEntry><div class=MFile><a href="discover-js.html">Discover</a></div></div><div class=MEntry><div class=MFile><a href="dropbox-js.html">Dropbox</a></div></div><div class=MEntry><div class=MFile><a href="googledrive-js.html">GoogleDrive</a></div></div><div class=MEntry><div class=MFile id=MSelected>IndexedDB</div></div><div class=MEntry><div class=MFile><a href="inmemorystorage-js.html">InMemoryStorage</a></div></div><div class=MEntry><div class=MFile><a href="localstorage-js.html">LocalStorage</a></div></div><div class=MEntry><div class=MFile><a href="sync-js.html">Sync</a></div></div><div class=MEntry><div class=MFile><a href="widget-js.html">Widget</a></div></div><div class=MEntry><div class=MFile><a href="view-js.html">Widget.View</a></div></div><div class=MEntry><div class=MFile><a href="wireclient-js.html">WireClient</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Modules</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="cachinglayer-js.html">cachinglayer</a></div></div><div class=MEntry><div class=MFile><a href="eventhandling-js.html">eventhandling</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Index</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Events.html">Events</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Properties.html">Properties</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Interfaces.html">Interfaces</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Events">Events</option><option value="Functions">Functions</option><option value="Interfaces">Interfaces</option><option value="Properties">Properties</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>